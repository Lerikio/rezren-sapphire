!!! 5
%html
	%head
		%title= full_title(yield(:title))
		%meta{'http-equiv' => 'Content-Type', :content => 'text/html;charset=UTF-8'}
			= stylesheet_link_tag    "application"
			= stylesheet_link_tag    "sessions"
			= csrf_meta_tags
			-# = render 'layouts/shim'


	%body
		%canvas#matrix
	
		=yield


:javascript
	letter_size = 20;
	delay = 40;
	color = '#0067A5';

	matrix.getContext('2d').shadowBlur = 10;
	matrix.getContext('2d').shadowColor = "blue";

	var s = window.screen;
	var width = matrix.width  = s.width;
	var height = matrix.height = s.height;
	var letters = new Array;
	for (i=0;i<=width/20;i++){
		letters[i] = (-Math.random()*height*2-200);
	}
	var draw = function () {
		matrix.getContext('2d').fillStyle = 'rgba(0,0,0,.05)';
		matrix.getContext('2d').fillRect(0, 0, width, height);
		matrix.getContext('2d').fillStyle = color;
		matrix.getContext('2d').font=letter_size+"px Verdana";
		letters.map(function (y_pos, index) {
			text = String.fromCharCode(40 + Math.random() * 400);
			x_pos = index * letter_size;
			matrix.getContext('2d').fillText(text, x_pos, y_pos);
			letters[index] = (y_pos > height + Math.random() * 1e4) ? 0 : y_pos + letter_size;

		});
	};
	setInterval(draw, delay);
