$("#modal-window").html("<%= escape_javascript(render 'new') %>");

// Résident et/ou supélec
<<<<<<< HEAD
activate_button();

=======
init_buttons();
adherent_is_resident_supelec_rezoman();
activate_button();

// Moyen de paiement
payment_is_cheque_or_liquid();
choose_button();

>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
// Tooltips
$("[rel='tooltip']").tooltip();

// Selects
$('#rooms-select').select2({
<<<<<<< HEAD
  placeholder: "Chambre"
=======
  placeholder: "Chambre"  
>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
});
$('#years-select').select2({
  placeholder: "Promotion"
});

<<<<<<< HEAD
=======
// Faire disparaitre le modal quand la requête réussie
>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
$("form").on("ajax:success", function(event, data, status, xhr){
    $('#modal-window').modal('hide');
  });

<<<<<<< HEAD
// Functions
=======

// Functions
function init_buttons() {
    if ($('#adherent_resident').attr('value')=="true") {
      $("#resident-btn").addClass("btn-info active");
    }
    if ($('#adherent_supelec').attr('value')=="true") {
      $("#supelec-btn").addClass("btn-info active");
    }
}

>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
function activate_button() {
  $('.activable').children().click(function(){
    if ( $(this).hasClass('active') ){
      $(this).removeClass("btn-info active")
    } else {
      $(this).addClass("btn-info active");  
    };
<<<<<<< HEAD
    adherent_is_resident_or_supelec();
=======
    adherent_is_resident_supelec_rezoman();
    return false;
>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
  });
};

function choose_button() {
<<<<<<< HEAD
  $(this).parent().children('.btn-info').addClass('disabled');
  $(this).parent().children('.btn-info').removeClass('btn-info');
  $(this).removeClass('disabled');
  $(this).addClass("btn-info");
};

function adherent_is_resident_or_supelec() {

  if( $("#resident-btn").hasClass("active")){
    console.log('1');
    $('#resident-check').attr('value', true);
    $('#resident-tab').show();
    $('#resident').children().show();
  } else {
    console.log('2');
    $('#resident-check').attr('value', false);
=======
  $('.choosable').children().click(function(){
    if ( $(this).hasClass('active') ){
      // do nothing
    } else {
      $('.choosable').children().removeClass("btn-info active")
      $(this).addClass("btn-info active");
    };
    payment_is_cheque_or_liquid();
    return false;
  });
};

function adherent_is_resident_supelec_rezoman() {

  if( $("#resident-btn").hasClass("active")){
    $('#adherent_resident').attr('value', true);
    $('#resident-tab').show();
    $('#resident').children().show();
  } else {
    $('#adherent_resident').attr('value', false);
>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
    $('#resident-tab').hide();
    $('#resident').children().hide();
  };


  if( $("#supelec-btn").hasClass("active")){
<<<<<<< HEAD
    console.log('3');
    $('#supelec-check').attr('value', true);
    $('#supelec-tab').show();
    $('#supelec').children().show();
  } else {
    console.log('4');
    $('#supelec-check').attr('value', false);
    $('#supelec-tab').hide();
    $('#supelec').children().hide();
  };

=======
    $('#adherent_supelec').attr('value', true);
    $('#supelec-tab').show();
    $('#supelec').children().show();
  } else {
    $('#adherent_supelec').attr('value', false);
    $('#supelec-tab').hide();
    $('#supelec').children().hide();
  };
};

function payment_is_cheque_or_liquid(){

  var $field = $('#bank');
  var $input = $('#bank :input');

  if( $("#cheque-btn").hasClass("active")){
    $('#mean').val("cheque");
    $field.animate({opacity: 1}, 200);
    $input.removeAttr('disabled');

  } else {
    $('#mean').val("liquid");
    $field.animate({opacity: 0}, 200);
    setTimeout(function(){
      $input.delay(800).attr('disabled', true);
    });
  };
>>>>>>> 6d299dfb9b0a4c3197311b60d44d613cd23cfd8f
};